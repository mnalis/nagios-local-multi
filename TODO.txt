cron idea

cron can do
run-parts /etc/cron.daily > /var/spool/nagios-local-multi/cron.daily 2>&1

pa da reporta tamo umjesto da salje mailove. ili jos bolje /bin/mail replacement koji trpa u taj dir, pa nam ni ne treba nullmailer?

-------------------------------------------------------------------------------------------------------------------------------------------	
za apt npr.

root@polespear:/usr/lib/nagios/plugins# apt-get --dry-run dist-upgrade | tail -n 1 | grep --color=yes '[0-9]'
0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded.

root@polespear:/usr/lib/nagios/plugins# apt-get --dry-run dist-upgrade | tail -n 1 | grep -o '[0-9]*'
0
0
0
2
root@polespear:/usr/lib/nagios/plugins# apt-get --dry-run dist-upgrade | tail -n 1 | grep -o '[1-9]*'
2
root@polespear:/usr/lib/nagios/plugins# apt-get --dry-run dist-upgrade | tail -n 1 | grep -o '[1-9]*' | wc -l
1

-------------------------------------------------------------------------------------------------------------------------------------------	
i paziti da li je nedavno izvrsen apt-get update (/var/lib/apt/periodic/update-success-stamp ?)
-------------------------------------------------------------------------------------------------------------------------------------------	
i da ima /etc/multi_local_ignore.conf gdje se moze ignore to sve
(oblika "filename:regexp_to_ignore")
-------------------------------------------------------------------------------------------------------------------------------------------	
i staleness check

koji gleda modified time od dira i dize alert ako se nije updateao duze od par sati (i dummy check koji samo radi rm pa echo "OK: `date`" u neki filea unutra)... ako umre cron ili je disk full da znamo

a check da ignore ako je u fileu prvo pise "OK:" naravno
-------------------------------------------------------------------------------------------------------------------------------------------	
paket za multiple lokalne checkove

da kreira 1777 /var/spool/nagios-local-check dir i /etc/nagios/nrpe.d/nagios-local-checks.cfg sa /usr/lib/nagios/plugins/nagios-local-checks scriptom koja prati da li ima ista non-0-sized u tom diru, i ako da, generira WARNING (ili CRITICAL ako nagdje tekst CRITICAL ili ERROR) sa tekstom iz tog filea.

i da tomsoft-nadzor dependa na njega...

-------------------------------------------------------------------------------------------------------------------------------------------	
pa u /etc/cron.* staviti scripte koje samo pisu tamo nesto, npr.:
- sources.list da se zali ako nije unificiran (razliciti names mirrora, ili ima bpo bez posebnog komentara zasto i kada itd)
- cron jobs output?
- tomsoft-ganeti-node da doda "gnt-cluster verify | egrep -v ..." i "gnt-cluster verify-disks isto" u cron.daily
- eventualni output od tomsoft-mysql-backup i dr.
-------------------------------------------------------------------------------------------------------------------------------------------	
